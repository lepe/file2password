/*
  * domready (c) Dustin Diaz 2012 - License MIT
  */
!function(e,d,c){typeof module!="undefined"?module.exports=c():typeof define=="function"&&typeof define.amd=="object"?define(c):d[e]=c()}("domready",this,function(z){function n(b){o=1;while(b=y.shift()){b()}}var y=[],x,w=!1,v=document,u=v.documentElement,t=u.doScroll,s="DOMContentLoaded",r="addEventListener",q="onreadystatechange",p="readyState",o=/^loade|c/.test(v[p]);return v[r]&&v[r](s,x=function(){v.removeEventListener(s,x,w),n()},w),t&&v.attachEvent(q,x=function(){/^c/.test(v[p])&&(v.detachEvent(q,x),n())}),z=t?function(a){self!=top?o?a():y.push(a):function(){try{u.doScroll("left")}catch(c){return setTimeout(function(){z(a)},50)}a()}()}:function(b){o?b():y.push(b)}});domready(function(){if(typeof window.FileReader==="undefined"){return false}var a=document.createElement("input"),b=document.createElement("div"),c=document.getElementById("fpass");a.setAttribute("type","file");b.setAttribute("id","fpass_holder");c.parentNode.insertBefore(b,c.nextSibling);b.className="hidden";b.appendChild(a);c.onfocus=function(f){b.className=""};c.onchange=function(f){b.className="hidden"};a.onchange=function(h){h.preventDefault();var g=a.files[0],f=new FileReader();f.onload=function(e){a.value="";d(e.target.result)};f.readAsDataURL(g);return false};b.ondragover=function(){this.className="hover";return false};b.ondragend=function(){this.className="";return false};b.ondrop=function(i){this.className="";i.preventDefault();var g=i.dataTransfer.getData("Text");if(g.indexOf("http")==0){return false}var h=i.dataTransfer.files[0],f=new FileReader();f.onload=function(e){d(e.target.result)};f.readAsDataURL(h);return false};function d(f){f=f.replace(/(\r\n|\n|\r|\/)/gm,"").replace(/.*base64,/,"").replace(/\+/g,"");f=f.replace(/(.)(?=\1)/g,"").match(/[0-9a-zA-Z]/gm).slice(20,50).join("");if(f.length!=30){alert("File is too small to generate password, please choose another one (try a file with more than 40 bytes large)")}c.value=f;var e=document.getElementById("fpassr");if(e!==null){e.value=f}b.className="hidden"}});